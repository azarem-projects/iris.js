!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=19)}([function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},function(t,e,n){var r=n(3);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},function(t,e,n){var r=n(7),o=n(8),i=n(4),c=n(9);t.exports=function(t){return r(t)||o(t)||i(t)||c()}},function(t,e,n){var r=n(10),o=n(11),i=n(4),c=n(12);t.exports=function(t,e){return r(t)||o(t,e)||i(t,e)||c()}},function(t,e,n){var r=n(3);t.exports=function(t){if(Array.isArray(t))return r(t)}},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var c,a=t[Symbol.iterator]();!(r=(c=a.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var r=n(16);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){var r=n(17),o=n(18);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?o(t):e}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,n){"use strict";n.r(e);var r=n(1),o=n.n(r),i=n(0),c=n.n(i),a=n(5),s=n.n(a),u=n(6),f=n.n(u),p=n(2),l=n.n(p);function d(t){return Object.prototype.toString.call(t).replace(/\[object\s|\]/g,"")}function h(t){return"Object"===d(t)}function v(t){return"String"===d(t)}function y(t){return h(t)&&"{}"!=JSON.stringify(t)}function m(t,e){y(t)&&Object.keys(t).forEach(e)}function b(t,e){t.length&&t.forEach(e)}var g={};function x(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e in g||(g[e]=[]),g[e].push({node:t,handler:n,capture:r}),t.addEventListener(e,n,r)}var O=function(t,e){var n=0,r=function(t,e){return s()(e.matchAll(t)).map((function(t){return t[1]}))}(/(?=Iris.createElement.\s*?(\w+))/g,t);if(r){for(var o=0;o<r.length;o++){var i=n++;t=t.replace("".concat(r[o],", null"),"".concat(r[o],",{_id:'").concat(e).concat(i,"'}"))}for(o=0;o<r.length;o++){var c=n++;t=t.replace("".concat(r[o],", {"),"".concat(r[o],",{_id:'").concat(e).concat(c,"',"))}}return t};var j=function(t,e){var n=t.toString().replace("function","return function");return n=O(n,e),Function(n)()};var w=function(t){return(t&&t._id?t._id:"")+(t&&t.key?"-".concat(t.key):"")};function k(t){return t.__proto__}var S=function(t,e,n){var r=k(t);if(r){var o=r[e];o&&(o.apply(t,(null==n?void 0:n.arguments)||[]),t["$".concat(e,"Fired")]=!0)}},N=function(){function t(e,n,r){var i=this;o()(this,t),c()(this,"tagName",void 0),c()(this,"props",void 0),c()(this,"children",void 0),c()(this,"parent",void 0),c()(this,"key",void 0),c()(this,"component",void 0),c()(this,"scope",void 0),c()(this,"count",void 0);var a=w(n);if("Function"===d(e)){var s=e;if(a){var u=U.components.find((function(t){return t.id===a}));u?(this.component=u.instance,this.component.updateProps(n)):(this.component=new s(n),U.components.push({instance:this.component,id:a}))}else this.component=new s(n);this.component.extendScope(U.toInject),this.component.render=j(this.component.render,a),this.component.lastRender=this.component.render.apply(this.component),this.component.vNode=this,e=this.component.lastRender.tagName,r=this.component.lastRender.children}this.tagName=e,this.props=h(n)?n:{},this.children=r||!y(this.props)&&(v(n)&&[n]||"Array"===d(n)&&n)||[],this.key=n?n.key:void 0;var f=0;if(b(this.children,(function(e,n){e instanceof t?f+=e.count:i.children[n]=""+e,f++})),this.count=f,this.component){this.parent||(this.parent=U.vApp);var p=[];!function t(e){if(e.children)for(var n=0;n<e.children.length;n++)e.children[n].instance?p.push(e.children[n]):v(e.children[n])&&t(e.children[n])}(this);for(var l=0;l<p.length;l++)p[l].parent=this}}return l()(t,[{key:"render",value:function(){var e=document.createElement(this.tagName);this.component&&(this.component.$root=e,!this.parent&&U.vApp&&(this.parent=U.vApp));for(var n=0,r=Object.entries(this.props);n<r.length;n++){var o=f()(r[n],2),i=o[0],c=o[1];if(i.startsWith("on"))x(e,i.replace("on","").toLocaleLowerCase(),c);else i in e&&e.setAttribute(i,c)}return b(this.children,(function(n){var r=n instanceof t?n.render():document.createTextNode(n);n instanceof t&&n.component&&S(n.component,"beforeRender",{arguments:[r]}),e.appendChild(r),n instanceof t&&n.component&&!n.component.$onInitFired&&S(n.component,"onInit")})),e}}]),t}();var A=function t(){o()(this,t)};function P(t,e){for(var n={},r=[],o=0,i=t.length;o<i;o++){var c=t[o],a=_(c,e);a?n[a]=o:r.push(c)}return{keyIndex:n,free:r}}function _(t,e){if(t&&e)return"string"==typeof e?t[e]:e(t)}var I=function(t,e,n){for(var r,o,i=P(t,n),c=P(e,n),a=c.free,s=i.keyIndex,u=c.keyIndex,f=[],p=[],l=0,d=0;l<t.length;){if(o=_(r=t[l],n))if(u.hasOwnProperty(o)){var h=u[o];p.push(e[h])}else p.push(null);else{var v=a[d++];p.push(v||null)}l++}var y=p.slice(0);for(l=0;l<y.length;)null===y[l]?(x(l),j(l)):l++;for(var m=l=0;l<e.length;){o=_(r=e[l],n);var b=y[m],g=_(b,n);if(b)if(o===g)m++;else if(s.hasOwnProperty(o))_(y[m+1],n)===o?(x(l),j(m),m++):O(l,r);else O(l,r);else O(l,r);l++}function x(t){var e={index:t,type:0};f.push(e)}function O(t,e){var n={index:t,item:e,type:1};f.push(n)}function j(t){y.splice(t,1)}return{moves:f,children:p}};function $(t,e,n,r){var o=[];if(null!==e){if(v(t)&&v(e))t!==e&&o.push({type:"text",content:e});else if(t.tagName===e.tagName&&t.key===e.key){if(y(t.props)||y(e.props)){var i=function(t,e){var n=!1,r=t.props||{},o=e.props||{},i={};return m(r,(function(t){o[t]===r[t]&&r.hasOwnProperty(t)||(!n&&(n=!0),i[t]=o[t])})),n?i:null}(t,e);t.component||i&&o.push({type:"props",props:i})}!y(e.props)&&(e.props||{}).hasOwnProperty("ignore")||(t.children.length||e.children.length)&&function(t,e,n,r,o){var i=I(t,e,"key");e=i.children,i.moves.length&&o.push({type:"reorder",moves:i.moves});var c=null,a=n;b(t,(function(t,n){var o=e[n];a=c&&c.count?a+c.count+1:a+1,t!==o&&$(t,o,a,r),c=t}))}(t.children,e.children,n,r,o)}else o.push({type:"replace",node:e});o.length&&(r[n]=o)}}var E=function(t,e){var n={};return $(t,e,0,n),n};var R=function(t,e){!function t(e,n,r){var o=r[n.index];e.childNodes&&b(e.childNodes,(function(e){n.index++,t(e,n,r)})),o&&function(t,e){b(e,(function(e){switch(e.type){case"replace":var n=v(e.node)?document.createTextNode(e.node):e.node.render();t.parentNode.replaceChild(n,t);break;case"reorder":!function(t,e){var n=function(t){if(!t)return[];var e=[];return b(t,(function(t){e.push(t)})),e}(t.childNodes),r={};b(n,(function(t){if(1===t.nodeType){var e=t.getAttribute("key");e&&(r[e]=t)}})),b(e,(function(e){var o=e.index;if(0===e.type){if(!t.childNodes[o])return;var i=t.childNodes[o],c=U.components.find((function(t){return t.instance.$root===i}));if(c){var a=c.id;U.components.remove(a)}n[o]===t.childNodes[o]&&t.removeChild(t.childNodes[o]),n.splice(o,1)}else if(1===e.type){var s;r[e.item.key]?(s=t.removeChild(r[e.item.key]),n.splice(Array.prototype.indexOf.call(t.childNodes,r[e.item.key]),1)):s=h(e.item)?e.item.render():document.createTextNode(e.item),n.splice(o,0,s),t.insertBefore(s,t.childNodes[o]||null)}}))}(t,e.moves);break;case"props":!function(t,e){m(e,(function(n){void 0===e[n]?t.removeAttribute(n):function(t,e,n){switch(e){case"style":t.style.cssText=n;break;case"value":var r=t.tagName||"";"input"===(r=r.toLowerCase())||"textarea"===r?t.value=n:t.setAttribute(e,n);break;default:t.setAttribute(e,n)}}(t,n,e[n])}))}(t,e.props);break;case"text":t.textContent?t.textContent=e.content:t.nodeValue=e.content;break;default:throw new Error("Unknown patch type "+e.type)}}))}(e,o)}(t,{index:0},e)},C=function(){function t(e){o()(this,t),c()(this,"id",void 0),c()(this,"props",void 0),c()(this,"state",void 0),c()(this,"lastRender",void 0),c()(this,"$root",void 0),c()(this,"vNode",void 0),c()(this,"parent",void 0),c()(this,"$prepared",!1),c()(this,"$onInitFired",!1),this.props=e}return l()(t,[{key:"setState",value:function(t){this.state=Object.assign(this.state,t),this.$prepared&&this.$onInitFired&&this.forceUpdate()}},{key:"forceUpdate",value:function(){var t=this.render(),e=E(this.lastRender,t);this.lastRender=t,R(this.$root,e)}},{key:"updateProps",value:function(t){this.props=t}},{key:"extendScope",value:function(t){for(var e=0,n=Object.entries(t);e<n.length;e++){var r=f()(n[e],2),o=r[0],i=r[1];this[o]=i}}},{key:"dispatch",value:function(t,e){if(this.vNode&&this.vNode.parent){var n=this.vNode.parent.component;if(n){var r=k(n)[t];r&&r.call(n,e)}}}}]),t}(),T=function(){function t(){o()(this,t),c()(this,"items",void 0),this.items=[]}return l()(t,[{key:"push",value:function(t){this.items.push(t)}},{key:"find",value:function(t){return this.items.find(t)}},{key:"remove",value:function(t){var e=this.items.filter((function(e){return e.id.includes(t)}));console.log(Object.assign([],this.items));for(var n=0;n<e.length;n++){var r=this.items.indexOf(e[n]);this.items.splice(r,1)}console.log(Object.assign([],this.items))}}]),t}();var F=function(t){Object.assign(U.toInject,t.inject())},M=function t(){o()(this,t)};c()(M,"components",void 0),c()(M,"Component",void 0),c()(M,"Plugin",void 0),c()(M,"install",void 0),c()(M,"toInject",{}),c()(M,"createElement",void 0),c()(M,"vApp",void 0),c()(M,"mount",void 0),M.components=new T,M.Component=C,M.Plugin=A,M.install=F,M.createElement=function(t,e){for(var n,r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];var c=o.length>0,a=c?(n=[]).concat.apply(n,s()(o)):[];return new N(t,e,a)},M.mount=function(t,e){var n=v(e)?document.querySelector(e):e;U.vApp=t;var r,o,i=t.render();return n?n.replaceWith(i):(r="Target element not found. Provided target:",o=e,console.error("[Iris]: ".concat(r),o)),t.component&&(t.component.$prepared=!0,t.component.$onInitFired=!0,S(t.component,"onInit")),t};var U=M,L=n(18),D=n.n(L),W=n(14),q=n.n(W),B=n(15),J=n.n(B),V=n(13),z=n.n(V);function G(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=z()(t);if(e){var o=z()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return J()(this,n)}}var H=function(t){q()(n,t);var e=G(n);function n(t){var r;return o()(this,n),r=e.call(this),c()(D()(r),"state",{}),Object.assign(r.state,t),r}return l()(n,[{key:"setState",value:function(t){this.state=Object.assign(this.state,t),U.vApp.component&&U.vApp.component.forceUpdate()}},{key:"inject",value:function(){return{$store:{state:this.state,setState:this.setState}}}}]),n}(U.Plugin);window.StateManager=H,window.Iris=U}]);
//# sourceMappingURL=iris.js.map